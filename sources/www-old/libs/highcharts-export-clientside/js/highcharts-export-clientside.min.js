!function(e){e.exporting||(e.exporting=function(){});e.Chart.prototype.exportChart;e.Chart.prototype.exportChart=function(){};var t=e.getOptions()||{};t.exporting||(t.exporting={}),t.exporting.url="http://127.0.0.1:666/",t.exporting.csv||(t.exporting.csv={}),t.exporting.csv.url="http://127.0.0.1:666/",e.setOptions(t);var o={PDF:"application/pdf",PNG:"image/png",JPEG:"image/jpeg",SVG:"image/svg+xml",CSV:"text/csv",XLS:"application/vnd.ms-excel"},n={"application/pdf":".pdf","image/png":".png","image/jpeg":".jpeg","image/svg+xml":".svg","text/csv":".csv","application/vnd.ms-excel":".xls"},r={downloadPDF:"application/pdf",downloadPNG:"image/png",downloadJPEG:"image/jpeg",downloadSVG:"image/svg+xml"};r[e.getOptions().lang.downloadCSV||"Download CSV"]="text/csv",r[e.getOptions().lang.downloadXLS||"Download XLS"]="application/vnd.ms-excel";var i="\ufeff",a=!1,p=document.createElement("a");"undefined"!=typeof window.btoa&&"undefined"!=typeof p.download&&(a=!0);var s=window.Blob&&window.navigator.msSaveOrOpenBlob;e.exporting.MIME_TYPES=o,e.exporting.USE_TITLE_FOR_FILENAME=function(e,t){var o=this.title?this.title.textStr.replace(/ /g,"-").toLowerCase():"chart";return o};var d={},c=function(){var t=a||s;d[o.CSV]=t&&void 0!==e.Chart.prototype.getCSV,d[o.XLS]=t&&void 0!==e.Chart.prototype.getTable;var n=void 0!==e.Chart.prototype.getSVG;d[o.SVG]=t&&n&&void 0!==window.btoa;var r=!1;try{r=void 0!==new RGBColor("").ok}catch(i){}var p=document.createElement("canvas"),c="undefined"!=typeof canvg&&"undefined"!=typeof RGBColor&&r&&p.getContext&&p.getContext("2d");d[o.PNG]=t&&n&&c,d[o.JPEG]=n&&c&&a,d[o.PDF]=t&&n&&c&&"undefined"!=typeof jsPDF};c(),e.exporting.supports=function(e){return d[e]?d[e]:!1};var l,g,u,h,v=e.getOptions().exporting.buttons.contextButton.menuItems,m=function(e){return function(){this.exportChartLocal({type:e,csv:{itemDelimiter:";"}})}};for(var f in v)l=v[f],g=v[f].textKey,u=v[f].text,h=r[g]||r[u],h&&(e.exporting.supports(h)?v[f].onclick=m(h):delete v[f]);var x=function(e,t,o,n){var r=document.createElement("canvas");return r.setAttribute("width",t),r.setAttribute("height",o),canvg(r,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:t,scaleHeight:o,renderCallback:function(){n(r)}}),r},b=function(e,t,o){this.bundles=arguments};b.prototype.get=function(e){for(var t=0;t<this.bundles.length;t++)if(this.bundles[t]&&void 0!==this.bundles[t][e])return this.bundles[t][e]};var w={type:o.PNG,scale:2,filename:"chart",csv:{useBOM:o.XLS,useLocalDecimalPoint:!0}},y=function(e,t,o){var n,r=new b(t,e.options.exporting,w),i=e.options.exporting&&e.options.exporting.csv,a=new b((t||{}).csv,(e.options.exporting||{}).csv,w.csv),p={},s=["dateFormat","itemDelimiter","lineDelimiter"];for(var d in s)n=s[d],a.get(n)&&(e.options.exporting||(e.options.exporting={}),e.options.exporting.csv||(e.options.exporting.csv={}),p[n]=e.options.exporting.csv[n],e.options.exporting.csv[n]=a.get(n));return{hasCSVOptions:i,csvOpt:a,useLocalDecimalPoint:a.get("useLocalDecimalPoint"),useBOM:1==a.get("useBOM")||a.get("useBOM")==r.get("type"),optionsToCopy:s,oldOptions:p}},C=function(e,t,o){var n={content:void 0,datauri:void 0,blob:void 0},r=(t.useBOM?i:"")+e.getCSV(t.useLocalDecimalPoint);n.content=r,o(n)},S=function(e,t,o){var n={content:void 0,datauri:void 0,blob:void 0},r=(t.useBOM?i:"")+'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Sheet</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";}</style><meta name=ProgId content=Excel.Sheet></head><body>'+e.getTable(t.useLocalDecimalPoint)+"</body></html>";n.content=r,o(n)},O=function(e,t){if(t.hasCSVOptions)for(var o in t.optionsToCopy)optionToCopy=t.optionsToCopy[o],t.csvOpt.get(optionToCopy)&&(e.options.exporting.csv[optionToCopy]=t.oldOptions[optionToCopy]);else delete e.options.exporting.csv},D=function(e,t,o){var n=new b(t,e.options.exporting,w),r=n.get("scale"),i=e.options.width||n.get("sourceWidth")||e.chartWidth,a=e.options.height||n.get("sourceHeight")||e.chartHeight,p=i*r,s=a*r,d=o||e.options.exporting&&e.options.exporting.chartOptions||{};d.chart?(d.chart.width=p,d.chart.height=s):d.chart={width:p,height:s};var c=e.getSVG(d);return{svg:c,destWidth:p,destHeight:s}},E=function(e,t,o){var n={content:void 0,datauri:void 0,blob:void 0};n.content=t.svg,o(n)},P=function(e,t,n){var r={content:void 0,datauri:void 0,blob:void 0};x(t.svg,t.destWidth,t.destHeight,function(e){r.datauri=t.browserSupportDownload&&e.toDataURL&&e.toDataURL(t.type),r.blob=t.type==o.PNG&&!t.browserSupportDownload&&e.msToBlob&&e.msToBlob(),n(r)})},G=function(e,t,o){var n={content:void 0,datauri:void 0,blob:void 0};x(t.svg,t.destWidth,t.destHeight,function(e){var r=new jsPDF("l","mm",[t.destWidth,t.destHeight]);r.addImage(e,"JPEG",0,0,t.destWidth,t.destHeight),n.datauri=t.browserSupportDownload&&r.output("datauristring"),n.blob=!t.browserSupportDownload&&r.output("blob"),o(n)})},R=function(e,t,o){if(!o||!o.content&&!o.datauri&&!o.blob)throw new Error("Something went wrong while exporting the chart");t.browserSupportDownload&&(o.datauri||o.content)?(p=document.createElement("a"),p.href=o.datauri||"data:"+t.type+";base64,"+window.btoa(unescape(encodeURIComponent(o.content))),p.download=t.filename,document.body.appendChild(p),p.click(),p.remove()):t.browserSupportBlob&&(o.blob||o.content)?(blobObject=o.blob||new Blob([o.content],{type:t.type}),window.navigator.msSaveOrOpenBlob(blobObject,t.filename)):window.open(o)};e.Chart.prototype.exportChartLocal=function(t,r){var i=new b(t,this.options.exporting,w),p=i.get("type");if(!e.exporting.supports(p))throw new Error("Unsupported export format on this platform: "+p);var d={rendering:{},download:R};d.rendering[o.CSV]={preRender:y,render:C,postRender:O},d.rendering[o.XLS]={preRender:y,render:S,postRender:O},d.rendering[o.SVG]={preRender:D,render:E},d.rendering[o.PNG]={preRender:D,render:P},d.rendering[o.JPEG]={preRender:D,render:P},d.rendering[o.PDF]={preRender:D,render:G};var c,l=this;c=d.rendering[p].preRender?d.rendering[p].preRender(l,t,r):{},c.type=p,c.browserSupportDownload=a,c.browserSupportBlob=s;var g=i.get("filename");"function"==typeof g?c.filename=g.bind(this)(t,r)+n[p]:c.filename=i.get("filename")+n[p],d.rendering[p].render(l,c,function(e){d.rendering[p].postRender&&d.rendering[p].postRender(l,c),d.download(l,c,e)})},e.Chart.prototype.exportChart=e.Chart.prototype.exportChartLocal}(Highcharts);